#!/usr/bin/env bash
set -euo pipefail

script_dir="$(
  cd "$(dirname "${BASH_SOURCE[0]}")"
  pwd
)"
project_root="${script_dir}"

if [[ -f "${project_root}/.env.local" ]]; then
  set -a
  # shellcheck disable=SC1091
  source "${project_root}/.env.local"
  set +a
fi

if [[ -f "${project_root}/.env" ]]; then
  set -a
  # shellcheck disable=SC1091
  source "${project_root}/.env"
  set +a
fi

if [[ -n "${PYTHONPATH:-}" ]]; then
  export PYTHONPATH="${project_root}/src:${PYTHONPATH}"
else
  export PYTHONPATH="${project_root}/src"
fi

exec python -m comfy_endpoints.cli.main "$@"
